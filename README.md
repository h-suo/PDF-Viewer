# PDF Viewer

## ğŸ“– ëª©ì°¨

1. [ğŸ“¢ ì†Œê°œ](#1.)
2. [ğŸ‘¤ íŒ€ì›](#2.)
3. [â±ï¸ íƒ€ì„ë¼ì¸](#3.)
4. [ğŸ“Š UML & íŒŒì¼íŠ¸ë¦¬](#4.)
5. [ğŸ“± ì‹¤í–‰ í™”ë©´](#5.)
6. [ğŸ¤” ê³ ë¯¼í•œ ì ](#6.)
7. [ğŸ”— ì°¸ê³  ë§í¬](#7.)

<br>

<a id="1."></a>

## 1. ğŸ“¢ ì†Œê°œ
URLë¡œ PDF íŒŒì¼ì„ ì¶”ê°€í•˜ì„¸ìš”! ë¶ë§ˆí¬, í•˜ì´ë¼ì´íŠ¸, ë©”ëª¨ë„ ê°€ëŠ¥í•©ë‹ˆë‹¤!

> **í•µì‹¬ ê°œë… ë° ê²½í—˜**
> 
> - **MVVM**
>   - í”„ë¡œì íŠ¸ì˜ ê°€ë…ì„±ì„ ë†’ì´ê¸° ìœ„í•´ `MVVM` íŒ¨í„´ì„ ì´ìš©í•´ í”„ë¡œì íŠ¸ íŒŒì¼ ë¶„ë¦¬
> - **Combine**
>   - `ViewModel`ì˜ ë°ì´í„°ë¥¼ `View`ì— ë°”ì¸ë”©í•˜ê¸° ìœ„í•´ `Combine` ì‚¬ìš©
> - **PDFKit**
>   - `PDF` íŒŒì¼ì„ í™œìš©í•˜ê³  ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì£¼ê¸° ìœ„í•´ `PDFKit` ì‚¬ìš©
> - **Realm**
>   - ì¼ê¸°ì˜ ë°ì´í„°ë¥¼ ë¡œì»¬ì— ì €ì¥í•˜ê¸° ìœ„í•´ `Realm`ì„ ì´ìš©í•œ ì €ì¥ ê¸°ëŠ¥ êµ¬í˜„
> - **UISearchController**
>   - `UISearchController`ë¥¼ ì´ìš©í•œ ê²€ìƒ‰ ê¸°ëŠ¥ êµ¬í˜„
> - **Unit Test**
>   - `ViewModel`ì´ ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•´ `Unit Test` êµ¬í˜„

<br>

<a id="2."></a>

## 2. ğŸ‘¤ íŒ€ì›

| [Erick](https://github.com/h-suo) |
| :--------: | 
| <Img src = "https://user-images.githubusercontent.com/109963294/235300758-fe15d3c5-e312-41dd-a9dd-d61e0ab354cf.png" width="350"/>|

<br>

<a id="3."></a>
## 3. â±ï¸ íƒ€ì„ë¼ì¸

> í”„ë¡œì íŠ¸ ê¸°ê°„ :  2023.10.09 ~ 2023.10.17

|ë‚ ì§œ|ë‚´ìš©|
|:---:|---|
| **2023.10.09** |â–«ï¸ ì‚¬ìš© ê¸°ìˆ  ì„ ì • <br> â–«ï¸ `PDFListViewController` UI êµ¬í˜„ <br>|
| **2023.10.10** |â–«ï¸ `PDFListCell`, `PDFDetailViewController` UI êµ¬í˜„ <br> â–«ï¸ PDFData ì—”í‹°í‹° ìƒì„± <br>|
| **2023.10.11** |â–«ï¸ `PDFViewerUseCase` ìƒì„± <br> â–«ï¸ `PDFListViewModel` ìƒì„± <br> â–«ï¸ `PDFViewerCoordinator` ìƒì„± <br> â–«ï¸ `PDFDetailViewModel` ìƒì„± <br>|
| **2023.10.16** |â–«ï¸ ë¶ë§ˆí¬ ê¸°ëŠ¥ ì¶”ê°€ <br> â–«ï¸ ë©”ëª¨ ê¸°ëŠ¥ ì¶”ê°€ <br> â–«ï¸ `realm`ì„ ì´ìš©í•œ ë¡œì»¬ ë°ì´í„° ì €ì¥ ê¸°ëŠ¥ êµ¬í˜„ <br>|

> ë¦¬í™í† ë§ ê¸°ê°„ :  2023.11.21 ~ 2023.12.3

|ë‚ ì§œ|ë‚´ìš©|
|:---:|---|
| **2023.11.21** |â–«ï¸ `UISearchController`ë¥¼ ì´ìš©í•œ ê²€ìƒ‰ ê¸°ëŠ¥ ì¶”ê°€ <br>|
| **2023.11.27** |â–«ï¸ PDF í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ë³´ì—¬ì£¼ëŠ” ê¸°ëŠ¥ ì¶”ê°€ <br>|
| **2023.11.28** |â–«ï¸ `highlight` ê¸°ëŠ¥ ì¶”ê°€ <br> â–«ï¸ `highlight` ë°ì´í„°ë¥¼ ì €ì¥í•  ìˆ˜ ìˆë„ë¡ `realm` ë§ˆì´ê·¸ë ˆì´ì…˜<br>|
| **2023.12.01** |â–«ï¸ `highlight` ì‚­ì œ ê¸°ëŠ¥ ì¶”ê°€ <br>|
| **2023.12.03** |â–«ï¸ `ViewModel` í…ŒìŠ¤íŠ¸ ì¶”ê°€ <br>|

<br>

<a id="4."></a>
## 4. ğŸ“Š UML & íŒŒì¼íŠ¸ë¦¬

### UML

<Img src = "https://github.com/h-suo/PDFViewer/assets/109963294/253b0edb-7cf8-4cbe-83c1-e879e53a03f0" width="800"/>

### íŒŒì¼íŠ¸ë¦¬
```
PDFViewer
â”œâ”€â”€ Application
â”‚Â Â  â”œâ”€â”€ AppDelegate.swift
â”‚Â Â  â”œâ”€â”€ SceneDelegate.swift
â”‚Â Â  â””â”€â”€ DIContainer
â”‚Â Â   Â Â  â””â”€â”€ DIContainer.swift
â”œâ”€â”€ Domain
â”‚Â Â  â””â”€â”€ Entity
â”‚Â Â      â””â”€â”€ PDFData.swift
â”œâ”€â”€ Presentation
â”‚Â Â  â”œâ”€â”€ PDFList
â”‚Â Â  â”‚   â”œâ”€â”€ ViewModel
â”‚Â Â  â”‚   â”‚   â””â”€â”€ PDFListViewModel.swift
â”‚Â Â  â”‚   â””â”€â”€ View
â”‚Â Â  â”‚    Â Â  â”œâ”€â”€ PDFListCell.swift
â”‚Â Â  â”‚    Â Â  â””â”€â”€ PDFListViewController.swift
â”‚Â Â  â””â”€â”€ PDFDetail
â”‚Â Â   Â Â  â”œâ”€â”€ ViewModel
â”‚Â Â   Â Â  â”‚   â””â”€â”€ PDFDetailViewModel.swift
â”‚Â Â   Â Â  â””â”€â”€ View
â”‚Â Â   Â Â   Â Â  â”œâ”€â”€ PDFDetailViewController.swift
â”‚Â Â   Â Â   Â Â  â”œâ”€â”€ PDFMemoViewController.swift
â”‚Â Â   Â Â   Â Â  â””â”€â”€ PageNumberView.swift
â”œâ”€â”€ Data
â”‚Â Â  â”œâ”€â”€ DTO
â”‚Â Â  â”‚Â Â  â””â”€â”€ PDFDTO.swift
â”‚Â Â  â”œâ”€â”€ Repositories
â”‚Â Â  â”‚Â Â  â”œâ”€â”€ Repository.swift
â”‚Â Â  â”‚Â Â  â””â”€â”€ RealmRepository.swift
â”‚Â Â  â””â”€â”€ Translater
â”‚Â Â      â””â”€â”€ RealmTranslater.swift
â”œâ”€â”€ Error
â”‚Â Â  â””â”€â”€ RepositoryError.swift
â”œâ”€â”€ Utils
â”‚   â”œâ”€â”€ Extensions
â”‚   â”‚Â Â  â”œâ”€â”€ Character+.swift
â”‚   â”‚Â Â  â”œâ”€â”€ String+.swift
â”‚   â”‚Â Â  â”œâ”€â”€ UITextView+.swift
â”‚   â”‚Â Â  â””â”€â”€ UIViewController+.swift
â”‚   â”œâ”€â”€ Manager
â”‚   â”‚Â Â  â””â”€â”€ AlertManager.swift
â”‚   â””â”€â”€ NameSpace.swift
â””â”€â”€ Resources
Â Â  â”œâ”€â”€ Assets.xcassets
Â Â  â””â”€â”€ Info.plist
```

<br>

<a id="5."></a>
## 5. ğŸ“± ì‹¤í–‰ í™”ë©´
| PDF ì¶”ê°€ ë° ì‚­ì œ | PDF ê²€ìƒ‰ |
| :--------------: | :-------: |
| <Img src = "https://github.com/h-suo/PDFViewer/assets/109963294/912bb8e8-21c4-4106-933a-c33f08f7ff2a" width="300"/> | <Img src = "https://github.com/h-suo/PDFViewer/assets/109963294/04cf4b9d-3a80-4359-a8d0-b1f712164cbb" width="300"/> |
| **ë¶ë§ˆí¬** | **ë¶ë§ˆí¬ ì´ë™** |
| <Img src = "https://github.com/h-suo/PDFViewer/assets/109963294/df64f836-efb7-4dd2-a933-bd35f47be08b" width="300"/> | <Img src = "https://github.com/h-suo/PDFViewer/assets/109963294/1221a911-7c14-4653-9316-4b032a9f120c" width="300"/> |
| **í•˜ì´ë¼ì´íŠ¸** | **ë©”ëª¨** |
| <Img src = "https://github.com/h-suo/PDFViewer/assets/109963294/e9873bfe-ec55-47b4-99a1-96f7b7e94436" width="300"/> | <Img src = "https://github.com/h-suo/PDFViewer/assets/109963294/6ce06aa5-24d3-4a7a-854a-ca7e38a1d862" width="300"/> |

<br>

<a id="6."></a>
## 6. ğŸ¤” ê³ ë¯¼í•œ ì 

### 1ï¸âƒ£ íŒŒì¼ ë¶„ë¦¬

í”„ë¡œì íŠ¸ì˜ ê°€ë…ì„±ì„ ë†’ì´ê¸° ìœ„í•´ íŒŒì¼ ë¶„ë¦¬ì™€ ê·¸ë£¹í™”ì— ëŒ€í•´ ê³ ë¯¼ì„ í–ˆìŠµë‹ˆë‹¤. `MVVM` íŒ¨í„´ì„ ì‚¬ìš©í•˜ì—¬ `Model`, `ViewModel`, `View`ë¥¼ ë‚˜ëˆ„ëŠ” ê²ƒì„ ì‹œì‘ìœ¼ë¡œ ê·¸ ì™¸ì— ê°ì²´ì™€ íŒŒì¼ì„ ì—­í•  ë³„ë¡œ ë‚˜ëˆ„ì–´ ê·¸ë£¹í™”í–ˆìŠµë‹ˆë‹¤.

ê¸°ì¡´ì— ì‚¬ìš©í–ˆë˜ `MVC` íŒ¨í„´ê³¼ ë‹¬ë¦¬ `MVVM`ì€ `View`ì™€ `Model`ì˜ ë¶„ë¦¬ê°€ ê°€ëŠ¥í•˜ê³  `testable` í•œ êµ¬í˜„ì´ ê°€ëŠ¥í•˜ë‹¤ê³  ìƒê°í•˜ì—¬ `MVVM` íŒ¨í„´ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

> Application : ì•±ì˜ ìƒëª…ì£¼ê¸°ë¥¼ ê´€ë¦¬í•˜ëŠ” `AppDelegate`, `SceneDelegate` <br>
> â”” DIContainer : ì˜ì¡´ì„± ì£¼ì…ì„ ê´€ë¦¬í•˜ëŠ” ê°ì²´ <br>
> Domain  <br>
> â”” Entity : ì•±ì—ì„œ ì‚¬ìš©í•˜ëŠ” ë°ì´í„° ëª¨ë¸ <br>
> Presentation  <br>
> â”œ ViewModel : `View`ì— ìˆ˜ì‹ ëœ ì´ë²¤íŠ¸ ê´€ë¦¬ ë° ì‚¬ìš©ìì—ê²Œ ë³´ì—¬ì¤„ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ëŠ” ê°ì²´ <br>
> â”” View : `UI` ê´€ë¦¬ ë° ì‚¬ìš©ì ì´ë²¤íŠ¸ ìˆ˜ì‹ ì„ ë‹´ë‹¹í•˜ëŠ” ê°ì²´ <br>
> Data <br>
> â”œ DTO : ë¡œì»¬ `DB`ì—ì„œ ì‚¬ìš©í•˜ê¸° ìœ„í•œ ë°ì´í„° ëª¨ë¸ <br>
> â”œ Repository : ë°ì´í„°ë¥¼ ì €ì¥ ë° ìˆ˜ì •í•©ë‹ˆë‹¤. <br>
> â”” Translater : `DTO`ë¥¼ `Entity`ë¡œ ë³€í™˜í•˜ëŠ” ê°ì²´ <br>
> Util : í”„ë¡œì íŠ¸ì— í•„ìš”í•œ ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” `Util` ê°ì²´ì™€ `Extension` ì½”ë“œ <br>
> Resource : í”„ë¡œì íŠ¸ì— í•„ìš”í•œ ìì›

<br>

### 2ï¸âƒ£ ViewModel

`MVVM`ìœ¼ë¡œ í”„ë¡œì íŠ¸ë¥¼ ì„¤ê³„í•˜ë©° `ViewModel`ì„ êµ¬í˜„í•˜ëŠ”ë° ë§ì€ ê³ ë¯¼ì„ í–ˆìŠµë‹ˆë‹¤.

`ViewModel`ì˜ í° ì—­í• ì„ `Input`ê³¼ `Output`ìœ¼ë¡œ ë‚˜ëˆ„ì–´ ì‚¬ìš©ì ì´ë²¤íŠ¸ë¥¼ ë°›ì•„ì˜¤ëŠ” ë©”ì„œë“œì™€ ë°ì´í„°ë¥¼ ì „ë‹¬í•˜ëŠ” í”„ë¡œí¼í‹°ë¡œ ë‚˜ëˆ„ì–´ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

**PDFListViewModel**
```swift
protocol PDFListViewModelInput {
  func storePDF(title: String, urlString: String) throws
  func deletePDF(at index: Int) throws
  func searchPDF(_ text: String)
}

protocol PDFListViewModelOutput {
  var pdfDatasPublisher: Published<[PDFData]>.Publisher { get }
  var searchPDFDatasPublisher: Published<[PDFData]>.Publisher { get }
}

typealias PDFListViewModel = PDFListViewModelInput & PDFListViewModelOutput
```

<br>

**PDFListViewController**
```swift
// MARK: - SearchResults Updating
extension PDFListViewController: UISearchResultsUpdating {
  func updateSearchResults(for searchController: UISearchController) {
    guard let text = searchController.searchBar.text?.lowercased() else {
      return
    }
    
    viewModel.searchPDF(text)
  }
}
```

`View`ê°€ ì‚¬ìš©ìë¡œë¶€í„° ë°›ì•„ì˜¨ ì´ë²¤íŠ¸ë¥¼ `Input`ì˜ ë©”ì„œë“œë¥¼ ì´ìš©í•´ `ViewModel`ì´ ì•Œ ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.

```swift
// MARK: - Data Binding
extension PDFListViewController {
  // ...
  
  private func bindingSearchPDFData() {
    viewModel.searchPDFDatasPublisher.sink { pdfDatas in
      if !pdfDatas.isEmpty {
        self.loadCollectionView(pdfDatas)
      }
    }.store(in: &cancellables)
  }
}
```
`Output`ì„ ì´ìš©í•´ ë°ì´í„° ë°”ì¸ë”© í•˜ì—¬, `Input`ìœ¼ë¡œ ì¸í•´ ë°”ë€ ë°ì´í„°ì„ `View`ê°€ ë°”ë¡œ ì—…ë°ì´íŠ¸í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.

<br>

### 3ï¸âƒ£ PDFKit
`PDF`ë¥¼ ë³´ì—¬ì£¼ê¸° ìœ„í•´ Appleì—ì„œ ì œê³µí•˜ëŠ” í”„ë ˆì„ì›Œí¬ì¸ `PDFKit`ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

`PDFView`ë¡œ UIë¥¼ êµ¬í˜„í•˜ê³  `PDFDocument`ë¥¼ ë„£ì–´ `PDF`ë¥¼ ë³¼ ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤. <br>
`PDFView`ì˜ ë©”ì„œë“œë¥¼ í™œìš©í•˜ì—¬ í˜ì´ì§€ ì´ë™ê³¼ ë¶ë§ˆí¬ ê¸°ëŠ¥ ë“±ì„ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤.

```swift
final class PDFDetailViewController: UIViewController {
  
  // MARK: - Private Property
  private let pdfView: PDFView
    
  // MARK: - Configure UI Object
  private func configurePDFView(pdfDocument: PDFDocument?) {
    DispatchQueue.main.async {
      self.pdfView.document = pdfDocument
    }
  }
    
  // MARK: - Move PDF Page
  @objc private func tapNextButton() {
    pdfView.goToNextPage(nil)
  }
    
  // ...
}
```

<br>

### 4ï¸âƒ£ Realm

ì‚¬ìš©ìì˜ `PDF` ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ `Realm`ì„ ì´ìš©í•˜ì—¬ `Repository`ë¥¼ êµ¬í˜„í–ˆìŠµë‹ˆë‹¤. <br>
ë”•ì…”ë„ˆë¦¬ í˜•íƒœì˜ ë°ì´í„°ë¥¼ ì €ì¥í•˜ê¸° ìœ„í•´ `CoreData`ê°€ ì•„ë‹Œ `Realm`ì„ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.

**RealmRepository**
```swift
final class RealmRepository: Repository {
  
  // MARK: - Static Property
  static let shared = RealmRepository()
  
  // MARK: - Private Property
  private var realm: Realm
    
  // ...
}
```

**DefaultPDFListViewModel**
```swift
final class DefaultPDFListViewModel: PDFListViewModel {
  
  // MARK: - Private Property
  private let repository: Repository
  
  // ...
}
```

`ViewModel`ì—ì„œ `RealmRepository`ë¥¼ ì´ìš©í•´ì„œ ì‚¬ìš©ì ë°ì´í„°ë¥¼ ë¡œì»¬ì— ì˜êµ¬ì €ì¥í•  ìˆ˜ ìˆë„ë¡ í–ˆìŠµë‹ˆë‹¤.

<br>

<a id="7."></a>
## 7. ğŸ”— ì°¸ê³  ë§í¬
- [ğŸ Apple: PDFKit](https://developer.apple.com/documentation/pdfkit)
- [ğŸ Apple: PDFView](https://developer.apple.com/documentation/pdfkit/pdfview)
- [ğŸ Apple: UICollectionLayoutListConfiguration](https://developer.apple.com/documentation/uikit/uicollectionlayoutlistconfiguration)
- [ğŸ˜º GitHub: iOS-Clean-Architecture-MVVM](https://github.com/kudoleh/iOS-Clean-Architecture-MVVM)
- [ğŸ˜º GitHub: PDFKitExample](https://github.com/bonjin-app/iOS/tree/main/PDFKitExample)
- [ğŸ“š ë¸”ë¡œê·¸: Realmì˜ íŠ¹ì§•ê³¼ ì‚¬ìš©ë²•](https://velog.io/@dlskawns96/Swift-Realmì˜-íŠ¹ì§•ê³¼-ì‚¬ìš©ë²•)
